{% extends 'base.html.twig' %}
{% block title %}Admin Panel{% endblock %}
{% block body %}
    <div style="margin: 3%">
        <div class="container-fluid">
            <div class="row">
                <div class="col">
                    <h3 class="text-center">Zarządzanie obiektami</h3><br>
                    <div class="rooms">
                        <div class="js-rooms-table">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>Lp.</th>
                                    <th>Nazwa</th>
                                    <th>pojemność</th>
                                    <th colspan="2">Akcja</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for room in rooms %}
                                    {{ include('admin/_roomRow.html.twig') }}
                                {% else %}
                                    <tr>
                                        <td colspan="5">Brak sal</td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                                <tfoot>
                                <tr>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                    <div class="text-center">
                        <button class="show-obj btn btn-danger">Dodaj obiekt
                        </button>
                    </div>
                    <div class="modal" id="objModal" tabindex="-1"
                         role="dialog">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <div class="modal-body" id="body">
                                        <h3>Tworzenie sali</h3><br>
                                        <div class="room form">
                                        </div>
                                        <div class="form_edit">
                                            {{ form_start(room_form) }}
                                            <div class="form-group">
                                                <div class="form-contorl">
                                                    <div class="">
                                                        {{ form_label(room_form.name,'Nazwa sali') }}
                                                    </div>
                                                </div>

                                                {{ form_widget(room_form.name,{'attr': {'class': 'form-control'}}) }}
                                                {{ form_errors(room_form.name) }}
                                            </div>
                                            <div class="form-group">
                                                <div class="form-contorl">
                                                    {{ form_label(room_form.maxNumberOfUsers, 'Maksymalna liczba uzytkowników') }}
                                                </div>
                                                {{ form_widget(room_form.maxNumberOfUsers, {'attr': {'class': 'form-control'}}) }}
                                                {{ form_errors(room_form.maxNumberOfUsers) }}
                                            </div>
                                            <div class="modal-footer">
                                                <a class="btn btn-secondary"
                                                   href="{{ path('admin') }}">Zamknij</a>
                                                {{ form_row(room_form.submit, {'label': 'Utwórz'}) }}
                                            </div>
                                            {{ form_end(room_form) }}
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>


                </div>
                <div class="col">
                    <h3 class="text-center">Zarządzanie Karnetami</h3><br>
                    <div class="memberships">
                        <div class="js-memberships-type-table">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>Lp.</th>
                                    <th>Nazwa</th>
                                    <th>Czas trwania</th>
                                    <th>Typ</th>
                                    <th>Cena</th>
                                    <th colspan="2">Akcja</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for membership in memberships %}
                                    {{ include('admin/_membershipRow.html.twig') }}
                                {% else %}
                                    <tr>
                                        <td colspan="7">Brak karnetów</td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                                <tfoot>
                                <tr>
                                    <td>&nbsp;</td>
                                    <th></th>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                </tr>
                                </tfoot>
                            </table>

                        </div>
                    </div>
                    <div class="text-center">
                        <button class="show-memb btn btn-danger">Dodaj karnet
                        </button>
                    </div>
                    <div class="modal" id="membModal" tabindex="-1"
                         role="dialog">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <div class="modal-body" id="body">
                                        <h3>Tworzenie karnetu</h3><br>
                                        <div class="room form">
                                        </div>
                                        <div class="form_edit">
                                            {{ form_start(membership_form) }}
                                            <div class="form-group">
                                                <div class="form-contorl">
                                                    <div class="">
                                                        {{ form_label(membership_form.name,'Nazwa karnetu') }}
                                                    </div>
                                                </div>

                                                {{ form_widget(membership_form.name,{'attr': {'class': 'form-control'}}) }}
                                                {{ form_errors(membership_form.name) }}
                                            </div>
                                            <div class="form-group">
                                                <div class="form-contorl">
                                                    {{ form_label(membership_form.duration, 'Czas trwania') }}
                                                </div>
                                                {{ form_widget(membership_form.duration, {'attr': {'class': 'form-control'}}) }}
                                                {{ form_errors(membership_form.duration) }}
                                            </div>
                                            <div class="form-group">
                                                <div class="form-contorl">
                                                    {{ form_label(membership_form.type, 'Typ karnetu') }}
                                                </div>
                                                {{ form_widget(membership_form.type, {'attr': {'class': 'form-control'}}) }}
                                                {{ form_errors(membership_form.type) }}
                                            </div>
                                            <div class="form-group">
                                                <div class="form-contorl">
                                                    {{ form_label(membership_form.price, 'Cena') }}
                                                </div>
                                                {{ form_widget(membership_form.price, {'attr': {'class': 'form-control'}}) }}
                                                {{ form_errors(membership_form.price) }}
                                            </div>
                                            <div class="modal-footer">
                                                <a class="btn btn-secondary"
                                                   href="{{ path('admin') }}">Zamknij</a>
                                                {{ form_row(membership_form.submit, {'label': 'Utwórz'}) }}
                                            </div>
                                            {{ form_end(membership_form) }}
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>


                </div>
            </div>

        </div>
        <div class="stats">


        </div>
    </div>



    <div class="row" style="margin: 3%">
        {# TODO ogarnąć cały panel #}
        <div class="col">
            <h3> Nadawanie uprawnień</h3>

            <div class="form-group">
                <div class="form-contorl">
                    {{ form_label(form.user, 'Wybierz użytkownika') }}
                </div>
                {{ form_widget(form.user, {'attr': {'class': 'form-control'}}) }}
                {{ form_errors(form.user) }}
            </div>
            <div class="form-group">
                <div class="form-contorl">
                    {{ form_label(form.rola, 'Wybierz uprawnienia') }}
                </div>
                {{ form_widget(form.rola, {'attr': {'class': 'form-control'}}) }}
                {{ form_errors(form.rola) }}
            </div>
            <div class="form-group">
                {{ form_row(form.zapisz) }}
            </div>
            {# {{ form(form) }} #}
            <div class="edit"></div>
        </div>
        {# <div class="edit"></div> #}
        {# {{ include('admin/_edit_base.html.twig') }} #}


        <div class="col">
            <h3> Usuń użytkownika z systemu</h3>
            <div class="form-group">
                <div class="form-contorl">
                    {{ form_label(deleteUser_form.user, 'Wybierz użytkownika') }}
                </div>
                {{ form_widget(deleteUser_form.user, {'attr': {'class': 'form-control'}}) }}
                {{ form_errors(deleteUser_form.user) }}
            </div>
            <div class="form-group">
                {{ form_row(deleteUser_form.submit) }}
            </div>
            <div class="edit"></div>
        </div>
    </div>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.css"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.css"></script>
    {{ encore_entry_script_tags('adminpanel') }}
    {# <script src="{{asset('public/js/classes.js') }}"></script> #}
    <script>
        $(document).on('click', '.fa-pencil', function () {
            jQuery.noConflict();
            console.log('hallo');
            $('#myModal').trigger('focus')
            // $("#myModal").modal('show');
        });

        $(document).ready(function () {
            var $wrapper2 = $('.js-rooms-table');
            //RepLogApp.initialize($table);
            var repLogApp2 = new RepLogApp($wrapper2);
        });
        $(document).ready(function () {
            var $wrapper = $('.js-memberships-type-table');
            //RepLogApp.initialize($table);
            var repLogApp = new RepLogApp($wrapper);
        });

        $(document).on('click', '.show-memb', function () {
            jQuery.noConflict();
            $("#membModal").modal('show');
        });
        $(document).on('click', '.show-obj', function () {
            jQuery.noConflict();
            $("#objModal").modal('show');
        });
    </script>
{% endblock %}